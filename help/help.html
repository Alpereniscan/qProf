<html>

<head>
<title>qProf</title>
</head>

<body style="margin: 20px 30px 10px 30; font-family: Calibri, Candara, Segoe, 'Segoe UI', Optima, Arial, sans-serif;">

<h1>qProf plugin help</h1>

<div>
	The purpose of this plugin is to help create geological profiles. Georeferenced data describing topography, geological outcrops and attitudes can be used.
	<br /><br />
	This plugin was realized by M. Alberti (<a href="http:\\www.malg.eu">www.malg.eu</a>) and M. Zanieri.
	<br />The original concept is by M. Zanieri, while the implementation is by M. Alberti.
	<br />Some people contributed with their suggestions and testing, among them we want to thank S. Peduzzi, for his vigorous testing.
</div>
<br />
<div>A few posts describing the plugin are:
	<br /><br /><b>In Italian</b>:
	<ul>
		<li><a href="http://gisoftw.blogspot.it/2013/03/qprof-un-nuovo-plugin-quantumgis-per-la.html">qProf: un nuovo plugin QuantumGIS per la creazione di profili topografici</a> (2013-03-16)</li>
	<li><a href="http://qgis4dummies.wikidot.com/qprof">Qprof</a> (2015-06-04)</li>
	</ul>
	<br /><b>In English</b>:
	<ul>
		<li><a href="http://gisoftw.blogspot.it/2013/10/plotting-geological-planes-in-profiles.html">Plotting geological planes in profiles with Quantum GIS</a> (2013-10-26) </li>
		<li><a href="http://gisoftw.blogspot.it/2014/03/qprof-supports-on-fly-reprojection-and.html">qProf supports on-the-fly reprojection and multiples profile lines</a> (2014-03-02)</li>
		<li><a href="http://www.geokincern.com/?p=1452">Construction of geological cross sections in QGIS</a> (2016-03-01)</li>
	</ul>
	<br /><b>In French</b>:
	<ul>
		<li><a href="http://www.gis-blog.fr/2013/04/02/plugin-qprof-qgis/">Plugin qProf - Qgis</a> (2013-04-02)</li>
	</ul>


</div>
<br />
<h2>1. General workflow</h2>

<div>
	To construct a geological profile, the first step consists in the construction of a topographic profile, with input data
	represented by one or more DEMs.
	</div>
<br />
<div>
	While for constructing topographic profiles lines made up by more than just two points may be used,
	for further geological projections or intersections it is required that the profile line is made up by just two points,
	i.e., its start and end point. This constraint will probably be relaexed in future versions at least for geological
	intersection processings.
</div>
<br />
<div>
	Subsequently, for profiles created by lines with jst two points, we can process geological data, expressed by point,
	line or polygon layers with useful 	geological attributes stored in the their attribute tables.
	<br />The subsequent processings can be:
	<ul>
		<li>the projection of geological attitudes on the profile section;</li>
		<li>the projection of geological lines;</li>
		<li>the intersection of geological lines (e.g., faults) on the profile section;</li>
		<li>the intersection of geological polygonal elements (e.g., outcrops) on the profile section.</li>
	</ul>
</div>
<div>
	Last step is the export of the produced datasets as graphics and/or GIS data, for further elaborations in graphic or
	geological software.
</div>

<br />

<h2>2. Topographic profile creation</h2>

<div>
	It is possible to create a topographic profile in two ways:
	<ol>
		<li>from one or more DEMs and a line element, digitized or stored in a layer;
		<li>directly from a GPX file storing track points.</li>
	</ol>
	In the former case, data sources can be projected in different CRS, while the
	<u>created profile will be in the assigned project CRS</u>.
	<br />In the latter case, i.e. when creating a profile from a GPX file, the original latitude-longitude values are automatically converted
	to cartesian metric values, and from those the topographic profile is constructed.
</div>

<h3>2.1 Topographic profile creation from DEM(s)</h3>

<div>One or more DEM(s) sources have to be defined, as well a source profile line. The line can derive from a source line layer,
a on-the-fly-digitized line or a list of points.</div>

<br />
<div>
    When using a line layer, all the elements will be used, irrespective of eventual selections in the layer.
    Multiple lines will be merged into a single line, based on the chosen order field when available,
    or otherwise based on the internal line order. Some errors in derived profiles can be due to erroneous line ordering,
    not adjusted via the choice of a correct sequential order stored in an integer field (order values start from 1).
</div>
<br />
<div>
	When directly digitizing a line in the map, you add points wtih left clicks, and stops a line with a right click.
</div>
<br />
<div>
	It is also possible to define the profile as a list point coordinates.
	Each point is defined by a x-y coordinates pair, comma-separated, on a single row, for instance:
	<br /><i>549242.7, 242942.2</i>
	<br /><i>578370.3, 322634.5</i>
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_01.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 1. The plugin interface for topographic profile creation from DEM(s).
</div>
<br />
<div>
	The elevation statistics along the profile for each chosen DEM may be calculate with the "<i>Calculate profile statistics</i>" button.
	These statistics can be used as a help in the definition of the profile plot minimum and maximum elevations ("<i>plot z min value</i>"
	and "<i>plot z max value</i>" options). Otherwise, automatic values will be applied.
</div>
<br />
<div>
	You may define the "<i>Line densify spat_distance</i>" option, i.e. the spat_distance between consecutive sampling point automatically added
	when the original vertices of the used path have distances larger than this value.
	It is advisable to use a value comparable to the resolution of the used DEM,
	for instance 30 m for Aster DEMs. A suggested value is added automatically based on the resolution
	of the DEM with the highest spatial resolution.
    </div>
<br />
<div>
	By using "<i>Invert profile line orientation</i>", the profile line will have its orientation inverted, i.e., the start will become
	the end and the former end will become the profile start.
	<br />With the option "<i>Flip x-axis direction</i>", the start of the x-axis in the plot will be at the right, not at the left,
	so that distances will increase from left to right.
</div>
<br />
<div>
	The profile plot is created by using the "<i>Create profile</i>" button. Sometimes the plot creation may require more than just a few
	seconds, so please be patient... ;)
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_02.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 2. Topographic profile extracted in the eastern border of Mt. Alpi zone (southern Italy).
</div>
<br />
<h3>2.2 Topographic profile creation from GPX</h3>
<div>
	Topographic profiles can be created also using a GPX file as a source.
	Beware that in the current version, only profile lines with just two points (start and end points) may be used for further geological
	data projections and intersections. So if you just want to create a topographic profile, GPX profile sources are fine.
	In future releases, the only-two-points constraint for geological intersections should be removed.
</div>
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_03.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 3. The plugin interface for topographic profile creation from GPX files.
</div>
<br />
<h2>3. Geological element projections on the profile</h2>

Having already created a topographic profile as previously described,
it is then possible to perform on the same profile the projection of geological attitudes or traces.

<h3>3.1 Projection of geological attitudes</h3>

<div>
	The source for geological attitudes is a point layer. Only selected points will be projected, unless,
	in case of no point selection, all layer points will be projected.
</div>
<br />
<div>Required fields are the geological point <i>id</i> and its surface orientation, expressed by <i>dip direction</i> and
	<i>dip angle</i> values.
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_04.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 4. The plugin interface for geological attitude projections on the profile.
</div>
<br />
<div>
	The geological attitudes can be projected on the section plane according to three methods:
	<ol>
		<li>nearest point;</li>
		<li>projection along a common axis;</li>
		<li> projection along individual axes, for each geological record.</li>
	</ol>
	When choosing the <i>axes from</i> option, <i>trend</i> and <i>plunge</i> fields,
	storing the fold axis values along which to project each observation, are required in the source point layer.
</div>
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_05.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 5. Example of geological attitudes projection along a profile in the eastern sector of Mt. Alpi zone (Basilicata, Southern Italy).
</div>

<br />

<h3>3.2 Projection of geological lines</h3>

<div>
	Geological traces can be projected on the section plane, based on a fold axis for which
	trend and plunge values have to be defined.
</div>
<br />
<div>
	The "<i>Line densify spat_distance</i>" option describes the spat_distance used to densify the lines to plot, when original
	points are separated by distances larger than the densify spat_distance.
</div>
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_06.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 6. The plugin interface for geological lines projections on the profile.
</div>
<br />
<div>
	The "<i>Id field</i> is used to label the project lines in the resulting plot, as evident in Fig. 7.
</div>
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_07.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 7. Example of geological line projections on a profile in the Mt. Alpi zone (Basilicata, Southern Italy).
</div>

<br />
<h2>4. Intersections of geological elements</h2>
<div>
	It is possible to determine the intersections of the profile (composed by just two points) with lines ("<i>Intersect line layer</i>")
	or with polygons ("<i>Intersect polygon layer</i>"), representing geological features.
</div>
<br />
<div>
	An <i>Id</i> field and a <i>Classification</i> field can be provided, as an aid in plot visualization.</div>
<br />
<div>
	Previously created intersection can be removed by using the "<i>Reset intersections</i>" button.
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_08.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 8. Example of geological line intersection on a profile in the Mt. Alpi zone (Basilicata, Southern Italy).
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_09.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 9. Example of geological polygon intersection on a profile in the Mt. Alpi zone (Basilicata, Southern Italy).
</div>

<br />
<h2>5. Result export</h2>

<div>
	The last created figure can be saved as PDF, svg or tif. The export graphic parameters can
	be saved in a text file and loaded for applying them to further plots.
	</div>
<br />
<div>
	Result data can be exported ad point/line shapefiles and/or csv files, depending on the particular type of exported data.
	The exported data will have the same CRS as the current QGis project.
</div>
<br />
<div>
	Note: the slope is saved as relative (positive when upward, negative when downward), even if plotted as absolute.
	To change to absolute value, apply the absolute function on the relative field in a GIS or spreadsheet software.
</div>
<br />
<div style="text-align:center;margin: 20px;font-size: 90%;font-style:italic;">
	<img src="images/Fig_10.png" style="align:middle; max_width: 80%"/>
	<br /><br />Fig. 10. The plugin interface for result export.
</div>



<br />
<br />
<div style="font-size: 85%; font-style: italic;">
-----
<br /><br />
Doc version 2016-04-17, by Mauro Alberti - <a href="mailto:alberti.m65@gmail.com">alberti.m65@gmail.com</a>
</div>

<br /><br />

</body>

</html>